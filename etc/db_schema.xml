<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="stockist" resource="default" comment="Stockist locations">
        <column name="stockist_id" xsi:type="int" padding="10" unsigned="true" nullable="false" identity="true" comment="Entity ID"/>
        <column name="identifier" xsi:type="varchar" nullable="false" comment="External identifier" />
        <column name="is_active" xsi:type="boolean" nullable="false" comment="Store is currently active" default="true"/>
        <column name="url_key" xsi:type="varchar" nullable="false" comment="Url Key"/>
        <column name="lat" xsi:type="decimal" scale="6" precision="9" nullable="true" comment="Latitude" />
        <column name="lng" xsi:type="decimal" scale="6" precision="9" nullable="true" comment="Longitude" />
        <column name="name" xsi:type="varchar" comment="Name" />
        <column name="description" xsi:type="text" comment="Description"/>
        <column name="street" xsi:type="varchar" comment="Street" />
        <column name="city" xsi:type="varchar" comment="City" />
        <column name="postcode" xsi:type="varchar" comment="Postcode" />
        <column name="region_id" xsi:type="int" comment="Region Id" unsigned="true" nullable="true" identity="false"/>
        <column name="region" xsi:type="varchar" comment="Region" />
        <column name="country" xsi:type="varchar" comment="Country Code" />
        <column name="phone" xsi:type="varchar" comment="Phone" />
        <column name="email" xsi:type="varchar" comment="Email" nullable="true" length="255"/>
        <column name="fax" xsi:type="varchar" comment="Fax" nullable="true" length="255"/>
        <column name="store_ids" xsi:type="varchar" comment="Associated store views" />
        <column name="hours" xsi:type="text" comment="Store Opening Hours" />
        <column name="meta_title" xsi:type="varchar" nullable="true" length="255" comment="Meta Title"/>
        <column name="meta_keywords" xsi:type="varchar" nullable="true" length="255" comment="Meta Keywords"/>
        <column name="meta_description" xsi:type="varchar" nullable="true" length="255" comment="Meta Description"/>
        <column name="updated_at" xsi:type="timestamp" on_update="true" nullable="false" default="CURRENT_TIMESTAMP"
                comment="Updated At"/>
        <constraint xsi:type="unique" referenceId="STOCKIST_URL_KEY">
            <column name="url_key"/>
        </constraint>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="stockist_id"/>
        </constraint>
        <constraint xsi:type="unique" referenceId="STOCKISTS_IDENTIFIER">
            <column name="identifier"/>
        </constraint>
    </table>
    <table name="auspost_postcode" resource="default" comment="AusPost Postcode Data">
        <column name="entity_id" xsi:type="int" padding="10" unsigned="true" nullable="false" identity="true" comment="Entity ID"/>
        <column name="pcode" xsi:type="varchar" length="10" nullable="false" comment="Postcode"/>
        <column name="locality" xsi:type="varchar" length="255" nullable="false" comment="Locality Name"/>
        <column name="state" xsi:type="varchar" length="10" nullable="false" comment="State Code"/>
        <column name="comments" xsi:type="varchar" length="255" nullable="true" comment="Comments"/>
        <column name="category" xsi:type="varchar" length="100" nullable="true" comment="Category"/>
        <column name="longitude" xsi:type="decimal" scale="7" precision="10" nullable="true" comment="Longitude"/>
        <column name="latitude" xsi:type="decimal" scale="7" precision="10" nullable="true" comment="Latitude"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="entity_id"/>
        </constraint>
        <constraint xsi:type="unique" referenceId="AUSPOST_POSTCODE_PCODE_LOCALITY_STATE">
            <column name="pcode"/>
            <column name="locality"/>
            <column name="state"/>
        </constraint>
        <index referenceId="AUSPOST_POSTCODE_PCODE" indexType="btree">
            <column name="pcode"/>
        </index>
        <index referenceId="AUSPOST_POSTCODE_LOCALITY" indexType="btree">
            <column name="locality"/>
        </index>
    </table>
</schema>
