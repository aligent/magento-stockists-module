<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Aligent\Stockists\Api\Data\StockistSearchResultsInterface"
                type="Magento\Framework\Api\SearchResults" />
    <preference for="Aligent\Stockists\Api\StockistRepositoryInterface"
                type="Aligent\Stockists\Model\StockistRepository" />
    <preference for="Aligent\Stockists\Api\Data\StockistInterface"
                type="Aligent\Stockists\Model\Stockist" />
    <preference for="Aligent\Stockists\Api\GeoSearchCriteriaInterface"
                type="Aligent\Stockists\Model\GeoSearchCriteria" />
    <preference for="Aligent\Stockists\Api\Data\TradingHoursInterface"
                type="Aligent\Stockists\Model\TradingHours" />
    <preference for="Aligent\Stockists\Api\AdapterInterface"
                type="Aligent\Stockists\Model\GoogleMapsAdapter" />
    <preference for="Aligent\Stockists\Api\GeocodeResultInterface"
                type="Aligent\Stockists\Model\GoogleMapsGeocodeResult" />
    <preference for="Aligent\Stockists\Api\StockistValidationInterface"
                type="Aligent\Stockists\Model\StockistValidation" />
    <type name="Aligent\Stockists\Model\Stockist\Hydrator">
        <arguments>
            <argument name="dataProcessors" xsi:type="array">
                <item name="tradingHours" xsi:type="object">Aligent\Stockists\Model\Stockist\DataProcessor\TradingHours</item>
                <item name="coordinate" xsi:type="object">Aligent\Stockists\Model\Stockist\DataProcessor\Coordinate</item>
            </argument>
        </arguments>
    </type>
    <virtualType name="StockistSearchResultFactory" type="Magento\Ui\DataProvider\SearchResultFactory">
        <arguments>
            <argument name="hydrator" xsi:type="object">Aligent\Stockists\Model\Stockist\Hydrator</argument>
        </arguments>
    </virtualType>
    <type name="Aligent\Stockists\Ui\DataProvider\Stockist">
        <arguments>
            <argument name="searchResultFactory" xsi:type="object">StockistSearchResultFactory</argument>
        </arguments>
    </type>
    <type name="Aligent\Stockists\Model\StockistRepository">
        <plugin sortOrder="1" name="aligentStockistsStockistRepository"
                type="Aligent\Stockists\Plugin\Model\StockistRepositoryPlugin"/>
    </type>
    <type name="Magento\Framework\Console\CommandListInterface">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="aligent_stockists_geocode" xsi:type="object">Aligent\Stockists\Command\GeocodeStockists</item>
            </argument>
        </arguments>
    </type>
    <type name="Aligent\Stockists\Model\Stockist\DataProcessor\TradingHours">
        <arguments>
            <argument name="json" xsi:type="object">Magento\Framework\Serialize\Serializer\Json</argument>
        </arguments>
    </type>
    <!-- Import Configuration -->
    <preference for="Aligent\Stockists\Model\Import\Validator\ValidatorInterface"
                type="Aligent\Stockists\Model\Import\Validator\ValidatorChain"/>
    <type name="Aligent\Stockists\Model\Import\Validator\ValidatorChain">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="identifier" xsi:type="object">Aligent\Stockists\Model\Import\Validator\IdentifierValidator</item>
                <item name="required_fields" xsi:type="object">Aligent\Stockists\Model\Import\Validator\RequiredFieldsValidator</item>
                <item name="country" xsi:type="object">Aligent\Stockists\Model\Import\Validator\CountryValidator</item>
                <item name="region" xsi:type="object">Aligent\Stockists\Model\Import\Validator\RegionValidator</item>
                <item name="coordinates" xsi:type="object">Aligent\Stockists\Model\Import\Validator\CoordinatesValidator</item>
                <item name="email" xsi:type="object">Aligent\Stockists\Model\Import\Validator\EmailValidator</item>
            </argument>
        </arguments>
    </type>
    <type name="Aligent\Stockists\Model\Import\Stockists">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="append" xsi:type="object">Aligent\Stockists\Model\Import\Command\Append</item>
                <item name="replace" xsi:type="object">Aligent\Stockists\Model\Import\Command\Replace</item>
                <item name="delete" xsi:type="object">Aligent\Stockists\Model\Import\Command\Delete</item>
            </argument>
        </arguments>
    </type>
    <type name="Aligent\Stockists\Model\Import\AuspostPostcodes">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="append" xsi:type="object">Aligent\Stockists\Model\Import\Command\AuspostAppend</item>
                <item name="replace" xsi:type="object">Aligent\Stockists\Model\Import\Command\AuspostReplace</item>
                <item name="delete" xsi:type="object">Aligent\Stockists\Model\Import\Command\AuspostDelete</item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\ImportExport\Model\Import\SampleFileProvider">
        <arguments>
            <argument name="samples" xsi:type="array">
                <item name="stockists" xsi:type="string">Aligent_Stockists</item>
                <item name="auspost_postcodes" xsi:type="string">Aligent_Stockists</item>
            </argument>
        </arguments>
    </type>
</config>
